#!/bin/sh

# Prints the current volume or ðŸ”‡ if muted.

vol="$(wpctl get-volume @DEFAULT_AUDIO_SINK@)"

# If muted, print ðŸ”‡ and exit.
[ "$vol" != "${vol%\[MUTED\]}" ] && echo ðŸ”‡ && exit

vol="${vol#Volume: }"
split() {
    # For ommiting the . without calling an external program.
    IFS=$2
    set -- $1
    printf '%s' "$@"
}
vol="$(split "$vol" ".")"
vol="${vol##0}"

case 1 in
$((vol >= 67))) icon="ðŸ”Š" ;;
$((vol >= 33))) icon="ðŸ”‰" ;;
$((vol >= 1))) icon="ðŸ”ˆ" ;;
*) echo ðŸ”‡ && exit ;;
esac

echo "$icon $vol%"
